library(tvcure)
library(doSNOW)
library(compiler)
library(beepr)

options(scipen = 999)

##### Precompile tvcure functions
cmpfun(tvcure)
enableJIT(3)

##### Parallel processing
cl <- makeCluster(4, "SOCK")
registerDoSNOW(cl)

##### Load data
setwd("C:/Users/gwill/Dropbox/Research/Dissertation/Data Analysis - Oneal Russett 2001")
or = read.csv("OR.csv")

##### Models
orcox  = coxph(Surv(start, stop, dispute) ~ trade + capratio + growth + allies + democracy + contig, data = or); summary(orcox)
orcure = tvcure(Surv(start, stop, dispute) ~ capratio + growth,
            cureform = ~ trade + allies + democracy + contig, 
            data = or,
            brglm = T,
            var = T, parallel = T, nboot = 100); summary(orcure)
